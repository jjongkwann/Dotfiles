# ─── Keybind Config ───────────────────────────────────────────────────────────
# Set Ctrl-z to send-prefix
unbind C-b
set -g prefix `
set -g prefix2 ₩
bind-key ` last-window
bind-key ₩ last-window
bind-key e send-prefix

# Reload config
unbind r
bind r source-file ~/.config/tmux/tmux.conf

# Open new windows in current path
unbind N
bind N new-window -c "#{pane_current_path}"

# Open new panes in current path
unbind H
bind H split-window -h -c "#{pane_current_path}"
unbind V
bind V split-window -v -c "#{pane_current_path}"

# Rename current window & session
unbind W
bind W command-prompt -I "#W" { rename-window "%%" }
unbind S
bind S command-prompt -I "#S" { rename-session "%%" }

# Close current window
unbind Q
bind Q confirm-before -p "kill-window #W? (y/n)" kill-window


# ─── Tmux Options ─────────────────────────────────────────────────────────────
set -g mouse on
set -g base-index 1
set -g pane-base-index 1
set -g set-clipboard on
set -g status-position top
set -g default-terminal "tmux-256color"
set -g terminal-overrides ",*:RGB"
set -g escape-time 0
set -g renumber-windows on


# ─── Status Bar (Pure style) ─────────────────────────────────────────────────
set -g status-style "bg=default,fg=white"
set -g status-left-length 50
set -g status-right-length 50

# Left: session name
set -g status-left "#[fg=blue,bold][#S] #[default]"

# Window list
set -g window-status-format "#[fg=brightblack] #I:#W "
set -g window-status-current-format "#[fg=magenta,bold] #I:#W "
set -g window-status-separator ""

# Right: cpu, ram, date/time
set -g status-right-length 80
set -g status-right "#[fg=green]CPU:#{cpu_percentage} #[fg=cyan]RAM:#{ram_percentage} #[fg=brightblack]%Y-%m-%d %H:%M "

# Pane border
set -g pane-border-style "fg=brightblack"
set -g pane-active-border-style "fg=blue"

# Message style
set -g message-style "bg=default,fg=yellow"


# ─── Plugins ──────────────────────────────────────────────────────────────────
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-cpu'

# ─── Initialize Plugins ───────────────────────────────────────────────────────
run '~/.config/tmux/plugins/tpm/tpm'